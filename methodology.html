<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Methodology — Metal Surface Defect Detection</title>
  <style>
@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;500;600;700&family=IBM+Plex+Sans:wght@300;400;500;600;700&display=swap');
:root{--bg:#0c0d0f;--surface:#131518;--panel:#181a1e;--border:#222428;--border2:#2c2f35;--amber:#e8a634;--amber-dim:#7a5414;--steel:#8eb4c8;--red:#d95e5e;--green:#5ec98a;--text:#d6d9e0;--muted:#5a5f6e;--muted2:#3a3f4a;--mono:'IBM Plex Mono',monospace;--sans:'IBM Plex Sans',sans-serif}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{background:var(--bg);color:var(--text);font-family:var(--sans);font-size:15px;line-height:1.7;min-height:100vh;overflow-x:hidden}
body::after{content:'';position:fixed;inset:0;background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,0,0,.06) 2px,rgba(0,0,0,.06) 4px);pointer-events:none;z-index:9999}
nav{position:sticky;top:0;z-index:100;background:rgba(12,13,15,.92);backdrop-filter:blur(12px);border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;padding:0 40px;height:56px}
.nav-brand{display:flex;align-items:center;gap:10px;text-decoration:none}
.nav-logo{width:28px;height:28px;border:1.5px solid var(--amber);display:flex;align-items:center;justify-content:center;font-family:var(--mono);font-size:11px;font-weight:700;color:var(--amber);letter-spacing:-.05em}
.nav-title{font-family:var(--mono);font-size:13px;font-weight:600;color:var(--text);letter-spacing:.02em}
.nav-links{display:flex;align-items:center;gap:2px;list-style:none}
.nav-links a{font-family:var(--mono);font-size:12px;color:var(--muted);text-decoration:none;padding:6px 14px;letter-spacing:.04em;transition:color .2s;position:relative}
.nav-links a:hover,.nav-links a.active{color:var(--amber)}
.nav-links a.active::after{content:'';position:absolute;bottom:-1px;left:14px;right:14px;height:1px;background:var(--amber)}
.page-wrap{max-width:1060px;margin:0 auto;padding:0 32px 80px}
.hero{padding:80px 0 48px;border-bottom:1px solid var(--border);margin-bottom:64px;position:relative;overflow:hidden}
.hero-eyebrow{display:flex;align-items:center;gap:12px;margin-bottom:24px;font-family:var(--mono);font-size:11px;color:var(--muted);letter-spacing:.12em;text-transform:uppercase}
.eyebrow-line{width:32px;height:1px;background:var(--amber)}
.hero h1{font-family:var(--mono);font-size:clamp(28px,4vw,48px);font-weight:700;line-height:1.15;letter-spacing:-.03em;margin-bottom:8px;color:#fff}
.hero h1 em{font-style:normal;color:var(--amber)}
.hero-sub{font-family:var(--mono);font-size:14px;color:var(--muted);margin-bottom:0;letter-spacing:.04em}
.section{margin-bottom:64px}
.section-header{display:flex;align-items:center;gap:14px;margin-bottom:28px;padding-bottom:16px;border-bottom:1px solid var(--border)}
.section-num{font-family:var(--mono);font-size:10px;color:var(--amber);letter-spacing:.15em}
.section-title{font-family:var(--mono);font-size:18px;font-weight:600;color:#fff;letter-spacing:-.01em}
.section-divider{flex:1;height:1px;background:var(--border)}
.prose{font-size:14px;color:var(--muted);line-height:1.8;margin-bottom:20px}
.callout{border-left:3px solid var(--amber);background:rgba(232,166,52,.05);padding:16px 20px;margin:20px 0;font-size:13px;color:var(--muted);line-height:1.6}
.callout strong{color:var(--amber);font-family:var(--mono)}
.pipeline{border:1px solid var(--border);background:var(--surface)}
.pipeline-row{display:grid;grid-template-columns:48px 200px 1fr;align-items:start;border-bottom:1px solid var(--border);transition:background .2s}
.pipeline-row:last-child{border-bottom:none}
.pipeline-row:hover{background:var(--panel)}
.pipe-num{padding:20px 0 20px 20px;font-family:var(--mono);font-size:11px;color:var(--amber-dim);font-weight:700}
.pipe-stage{padding:20px 16px;font-family:var(--mono);font-size:13px;font-weight:600;color:var(--amber);border-right:1px solid var(--border)}
.pipe-desc{padding:20px 24px;font-size:13px;color:var(--muted);line-height:1.6}
.pipe-desc code{font-family:var(--mono);font-size:12px;background:var(--panel);border:1px solid var(--border2);padding:1px 6px;color:var(--steel)}
.feat-grid{display:grid;grid-template-columns:1fr 1fr;gap:1px;background:var(--border);border:1px solid var(--border);margin-bottom:20px}
.feat-item{background:var(--surface);padding:20px 22px}
.feat-label{font-family:var(--mono);font-size:10px;letter-spacing:.12em;text-transform:uppercase;color:var(--amber);margin-bottom:6px}
.feat-desc{font-size:13px;color:var(--muted);line-height:1.5}
.code-block{background:var(--panel);border:1px solid var(--border);padding:24px;font-family:var(--mono);font-size:12px;color:var(--steel);line-height:1.7;overflow-x:auto;margin:20px 0;position:relative}
.code-block::before{content:attr(data-lang);position:absolute;top:8px;right:12px;font-size:10px;color:var(--muted2);letter-spacing:.1em;text-transform:uppercase}
.code-block .kw{color:var(--amber)}.code-block .cm{color:var(--muted);font-style:italic}.code-block .fn{color:var(--green)}.code-block .st{color:#c9a87c}
footer{border-top:1px solid var(--border);padding:32px 40px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:12px}
.footer-left{font-family:var(--mono);font-size:11px;color:var(--muted)}
.footer-left a{color:var(--amber);text-decoration:none}
.footer-right{display:flex;gap:20px}
.footer-right a{font-family:var(--mono);font-size:11px;color:var(--muted);text-decoration:none;letter-spacing:.04em;transition:color .2s}
.footer-right a:hover{color:var(--amber)}
@keyframes fadeIn{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
.fade-in{animation:fadeIn .6s ease both}
.fade-in-1{animation-delay:.1s}.fade-in-2{animation-delay:.2s}.fade-in-3{animation-delay:.3s}.fade-in-4{animation-delay:.4s}.fade-in-5{animation-delay:.5s}
@media(max-width:768px){nav{padding:0 20px}.page-wrap{padding:0 20px 60px}.feat-grid{grid-template-columns:1fr}.pipeline-row{grid-template-columns:40px 130px 1fr}}
  </style>
</head>
<body>

<nav>
  <a href="index.html" class="nav-brand">
    <div class="nav-logo">CV</div>
    <span class="nav-title">MSDD · Pixel Duo</span>
  </a>
  <ul class="nav-links">
    <li><a href="index.html">Overview</a></li>
    <li><a href="architecture.html">Architecture</a></li>
    <li><a href="methodology.html" class="active">Methodology</a></li>
    <li><a href="results.html">Results</a></li>
    <li><a href="https://github.com/Agam8118/tiet-ucs532p-duo" target="_blank">↗ GitHub</a></li>
  </ul>
</nav>

<div class="page-wrap">

  <div class="hero fade-in">
    <div class="hero-eyebrow">
      <span class="eyebrow-line"></span>
      <span>§4 — Proposed Methodology</span>
    </div>
    <h1>Pipeline Design<br><em>&amp; Feature Strategy</em></h1>
    <p class="hero-sub">A structured 5-stage classical CV pipeline for real-time surface scratch detection under MSME workshop conditions.</p>
  </div>

  <!-- CAMERA SETUP -->
  <div class="section fade-in fade-in-1">
    <div class="section-header">
      <span class="section-num">4.1</span>
      <span class="section-title">Camera Setup</span>
      <span class="section-divider"></span>
    </div>
    <p class="prose">A fixed overhead RGB camera is mounted above a slow-moving conveyor belt or inspection table. Each image frame contains a single metal surface region captured under relatively consistent viewing geometry. This setup is realistic for small workshops and avoids the need for specialized imaging hardware.</p>
    <div class="feat-grid">
      <div class="feat-item">
        <div class="feat-label">Camera Position</div>
        <div class="feat-desc">Fixed overhead mount — consistent viewpoint across all captured frames, minimising perspective distortion and scale variation.</div>
      </div>
      <div class="feat-item">
        <div class="feat-label">Conveyor / Table</div>
        <div class="feat-desc">Slow-moving conveyor belt or static inspection table. No high-speed capture hardware required — standard webcam or industrial USB camera sufficient.</div>
      </div>
      <div class="feat-item">
        <div class="feat-label">Lighting</div>
        <div class="feat-desc">Controlled workshop lighting. Preprocessing pipeline (CLAHE + bilateral filter) compensates for residual illumination variability between sessions.</div>
      </div>
      <div class="feat-item">
        <div class="feat-label">Hardware Cost</div>
        <div class="feat-desc">No AOI hardware, no laser scanner, no structured light — only a standard RGB camera and a CPU-capable workstation.</div>
      </div>
    </div>
  </div>

  <!-- PREPROCESSING -->
  <div class="section fade-in fade-in-2">
    <div class="section-header">
      <span class="section-num">4.2</span>
      <span class="section-title">Image Preprocessing</span>
      <span class="section-divider"></span>
    </div>
    <p class="prose">Captured images are first enhanced to reduce the effects of uneven illumination and sensor noise. The preprocessing pipeline operates sequentially to normalise inputs before any feature extraction.</p>

    <div class="pipeline">
      <div class="pipeline-row">
        <div class="pipe-num">1</div>
        <div class="pipe-stage">Grayscale + Resize</div>
        <div class="pipe-desc">Convert to single-channel grayscale and resize to a fixed resolution. Grayscale is sufficient for texture and edge-based scratch features; colour channels add noise without benefit for steel surfaces.</div>
      </div>
      <div class="pipeline-row">
        <div class="pipe-num">2</div>
        <div class="pipe-stage">Histogram Equalisation</div>
        <div class="pipe-desc"><code>CLAHE</code> (Contrast Limited Adaptive Histogram Equalisation) applied to improve local contrast in defect regions. Suppresses over-amplification in flat homogeneous surface areas using clip limit control.</div>
      </div>
      <div class="pipeline-row">
        <div class="pipe-num">3</div>
        <div class="pipe-stage">Noise Suppression</div>
        <div class="pipe-desc"><code>Gaussian blur</code> or <code>median filter</code> applied to suppress high-frequency sensor noise without destroying fine edge details associated with scratches — which are critical for downstream Canny detection.</div>
      </div>
    </div>

    <div class="code-block" data-lang="python">
<span class="kw">def</span> <span class="fn">preprocess</span>(img_path):
    img = cv2.imread(img_path, cv2.IMREAD_GRAYSCALE)
    img = cv2.resize(img, (<span class="st">200</span>, <span class="st">200</span>))
    clahe = cv2.createCLAHE(clipLimit=<span class="st">2.0</span>, tileGridSize=(<span class="st">8</span>,<span class="st">8</span>))
    img = clahe.apply(img)
    img = cv2.GaussianBlur(img, (<span class="st">3</span>, <span class="st">3</span>), <span class="st">1.0</span>)
    <span class="kw">return</span> img
    </div>
  </div>

  <!-- SEGMENTATION -->
  <div class="section fade-in fade-in-3">
    <div class="section-header">
      <span class="section-num">4.3</span>
      <span class="section-title">Segmentation</span>
      <span class="section-divider"></span>
    </div>
    <p class="prose">To isolate potential defect regions, edge-based segmentation techniques are employed. Scratches manifest as linear discontinuities in surface intensity — making edge detection a natural and effective segmentation approach.</p>

    <div class="pipeline">
      <div class="pipeline-row">
        <div class="pipe-num">1</div>
        <div class="pipe-stage">Canny Edge Detection</div>
        <div class="pipe-desc"><code>cv2.Canny()</code> with tuned low/high thresholds highlights linear discontinuities on the surface characteristic of scratches. Produces a binary edge map isolating sharp intensity transitions.</div>
      </div>
      <div class="pipeline-row">
        <div class="pipe-num">2</div>
        <div class="pipe-stage">Morphological Operations</div>
        <div class="pipe-desc">Morphological <code>dilation</code> bridges small gaps in detected scratch edges. <code>Opening</code> removes spurious noise blobs. <code>Closing</code> fills gaps within candidate defect regions.</div>
      </div>
      <div class="pipeline-row">
        <div class="pipe-num">3</div>
        <div class="pipe-stage">Candidate Region Filtering</div>
        <div class="pipe-desc">Connected component analysis labels distinct candidate regions. Size filtering (minimum area threshold) eliminates sensor artifacts and preserves only scratch-scale candidate regions.</div>
      </div>
    </div>

    <div class="callout">
      <strong>Why Canny over Otsu here?</strong> Scratches are linear, high-gradient features — they are better captured by edge magnitude thresholding (Canny) than by global intensity thresholding (Otsu), which works better for blob-like defects like rust patches or pitting.
    </div>
  </div>

  <!-- FEATURE EXTRACTION -->
  <div class="section fade-in fade-in-4">
    <div class="section-header">
      <span class="section-num">4.4</span>
      <span class="section-title">Feature Extraction</span>
      <span class="section-divider"></span>
    </div>
    <p class="prose">From the segmented regions, handcrafted features are extracted to describe surface characteristics. These provide a compact numerical representation of the surface condition suitable for downstream classical ML classification.</p>

    <div class="feat-grid">
      <div class="feat-item">
        <div class="feat-label">Edge Density &amp; Orientation Stats</div>
        <div class="feat-desc">Ratio of edge pixels to total region pixels (edge density). Histogram of edge orientations — scratches produce a strongly peaked orientation distribution unlike random noise or normal surfaces.</div>
      </div>
      <div class="feat-item">
        <div class="feat-label">Gradient-based Descriptors</div>
        <div class="feat-desc">HOG (Histogram of Oriented Gradients) captures linear surface irregularities at multiple spatial scales. Gradient magnitude statistics (mean, std, max) over the candidate region.</div>
      </div>
      <div class="feat-item">
        <div class="feat-label">LBP Texture Histogram</div>
        <div class="feat-desc">Local Binary Patterns produce a rotation-invariant texture histogram. Scratched surfaces show distinctly different LBP code distributions compared to smooth defect-free steel.</div>
      </div>
      <div class="feat-item">
        <div class="feat-label">Gabor Filter Responses</div>
        <div class="feat-desc">Multi-orientation Gabor filters extract directional texture energy. A scratch at any angle will produce a strong response in the corresponding filter orientation.</div>
      </div>
    </div>

    <div class="callout">
      <strong>Feature vector summary:</strong> Edge density (1D) + orientation histogram (8D) + gradient statistics (4D) + LBP histogram (59D) + Gabor responses (24D) = ~96 dimensional feature vector before dimensionality reduction.
    </div>
  </div>

  <!-- DIM REDUCTION + CLASSIFICATION -->
  <div class="section fade-in fade-in-5">
    <div class="section-header">
      <span class="section-num">4.5</span>
      <span class="section-title">Dimensionality Reduction &amp; Classification</span>
      <span class="section-divider"></span>
    </div>
    <p class="prose">The extracted feature vectors are projected into a lower-dimensional space using Principal Component Analysis (PCA) to remove redundancy and noise while preserving defect-related variance. Classification is then performed using a Linear Discriminant Analysis (LDA) or Nearest Centroid classifier, assigning each sample to either the <code style="font-family:'IBM Plex Mono',monospace;font-size:12px;background:var(--panel);border:1px solid var(--border2);padding:1px 6px;color:var(--steel)">Scratch</code> or <code style="font-family:'IBM Plex Mono',monospace;font-size:12px;background:var(--panel);border:1px solid var(--border2);padding:1px 6px;color:var(--steel)">No-Defect</code> class based on statistical similarity.</p>

    <div class="pipeline">
      <div class="pipeline-row">
        <div class="pipe-num">1</div>
        <div class="pipe-stage">PCA</div>
        <div class="pipe-desc">Reduces the ~96D feature vector to the most discriminative 15–20 principal components, retaining ≥95% of variance. Eliminates correlated redundancy between LBP and Gabor features. Prevents overfitting on small MSME datasets.</div>
      </div>
      <div class="pipeline-row">
        <div class="pipe-num">2</div>
        <div class="pipe-stage">LDA Projection</div>
        <div class="pipe-desc">Linear Discriminant Analysis finds the optimal projection that maximises separation between the Scratch and No-Defect classes while minimising within-class spread. For binary classification, reduces to a single discriminant axis.</div>
      </div>
      <div class="pipeline-row">
        <div class="pipe-num">3</div>
        <div class="pipe-stage">Nearest Centroid</div>
        <div class="pipe-desc">Computes class centroids in the LDA-projected space. Assigns each test sample to the nearest centroid by Euclidean distance — fast (&lt;5ms), interpretable, no hyperparameters. Ideal for real-time inspection.</div>
      </div>
      <div class="pipeline-row">
        <div class="pipe-num">4</div>
        <div class="pipe-stage">Output</div>
        <div class="pipe-desc">Binary class label: <code>Scratch</code> or <code>No-Defect</code>. Confidence score (distance to centroid, normalised). Visual overlay highlighting the detected defect region on the original image.</div>
      </div>
    </div>

    <div class="code-block" data-lang="python">
<span class="cm"># Fit PCA + LDA on training features</span>
pca = PCA(n_components=<span class="st">0.95</span>)
X_train_pca = pca.fit_transform(X_train)
X_test_pca  = pca.transform(X_test)

lda = LinearDiscriminantAnalysis()
X_train_lda = lda.fit_transform(X_train_pca, y_train)
X_test_lda  = lda.transform(X_test_pca)

<span class="cm"># Nearest Centroid classification</span>
clf = NearestCentroid()
clf.fit(X_train_lda, y_train)
y_pred = clf.predict(X_test_lda)
<span class="cm"># Output: 0 = No-Defect, 1 = Scratch</span>
    </div>
  </div>

</div>

<footer>
  <div class="footer-left">© 2026 Pixel Duo · <a href="https://github.com/Agam8118/tiet-ucs532p-duo" target="_blank">GitHub ↗</a> · UCS532P Computer Vision · TIET</div>
  <div class="footer-right">
    <a href="index.html">Overview</a>
    <a href="architecture.html">Architecture</a>
    <a href="results.html">Results</a>
  </div>
</footer>

</body>
</html>
